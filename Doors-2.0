local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local MenuButton = Instance.new("TextButton")
local UIListLayout = Instance.new("UIListLayout")
local espDoorsEnabled = false
local espKeysEnabled = false
local espLeversEnabled = false
local espLocksEnabled = false
local espBoxEnabled = false  -- Переменная для отслеживания состояния ESP Box
local speedBoostEnabled = false
local lightBoostEnabled = false

-- Основное меню
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MainFrame.Size = UDim2.new(0, 400, 0, 500)
MainFrame.Position = UDim2.new(0.2, 0, 0.2, 0)
MainFrame.Visible = false  -- Сначала меню скрыто

UIListLayout.Parent = MainFrame
UIListLayout.FillDirection = Enum.FillDirection.Vertical
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- Кнопка меню
MenuButton.Parent = ScreenGui
MenuButton.Text = "Menu"
MenuButton.Size = UDim2.new(0, 100, 0, 50)
MenuButton.Position = UDim2.new(0, 10, 0, 10)
MenuButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MenuButton.TextColor3 = Color3.fromRGB(255, 0, 0)
MenuButton.Font = Enum.Font.SourceSansBold
MenuButton.TextSize = 24

-- Функция для переключения видимости меню
MenuButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
end)

-- Функция для создания переключателей
local function createToggle(name, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0, 50)
    frame.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    frame.Parent = MainFrame

    local button = Instance.new("TextButton")
    button.Text = name
    button.Size = UDim2.new(0.8, 0, 1, 0)
    button.Position = UDim2.new(0.1, 0, 0, 0)
    button.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.SourceSans
    button.TextSize = 18
    button.Parent = frame

    button.MouseButton1Click:Connect(function()
        callback()
    end)
end

-- Функция для включения/выключения ESP Box
local function toggleEspBox()
    espBoxEnabled = not espBoxEnabled
    if espBoxEnabled then
        print("ESP Box enabled")
        -- Код для активации ESP Box
        -- Например, можно создать визуальные объекты вокруг определённых частей игры
    else
        print("ESP Box disabled")
        -- Код для деактивации ESP Box
        -- Убираем визуальные объекты, если они были созданы
    end
end

-- Создание кнопки для ESP Box в меню
createToggle("Toggle ESP Box", toggleEspBox)

-- Функции для включения/выключения ESP
local function toggleEspDoors()
    espDoorsEnabled = not espDoorsEnabled
    if espDoorsEnabled then
        print("ESP for doors enabled")
    else
        print("ESP for doors disabled")
    end
end

local function toggleEspKeys()
    espKeysEnabled = not espKeysEnabled
    if espKeysEnabled then
        print("ESP for keys enabled")
    else
        print("ESP for keys disabled")
    end
end

local function toggleEspLevers()
    espLeversEnabled = not espLeversEnabled
    if espLeversEnabled then
        print("ESP for levers enabled")
    else
        print("ESP for levers disabled")
    end
end

local function toggleEspLocks()
    espLocksEnabled = not espLocksEnabled
    if espLocksEnabled then
        print("ESP for locks enabled")
    else
        print("ESP for locks disabled")
    end
end

-- Создание кнопок переключателей для каждой функции
createToggle("Toggle Doors ESP", toggleEspDoors)
createToggle("Toggle Keys ESP", toggleEspKeys)
createToggle("Toggle Levers ESP", toggleEspLevers)
createToggle("Toggle Locks ESP", toggleEspLocks)

-- Функции для активации SpeedBoost и LightBoost
local function toggleSpeedBoost()
    speedBoostEnabled = not speedBoostEnabled
    if speedBoostEnabled then
        print("Speed Boost enabled")
        game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = game.Players.LocalPlayer.Character.Humanoid.WalkSpeed * 1.3
    else
        print("Speed Boost disabled")
        game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = game.Players.LocalPlayer.Character.Humanoid.WalkSpeed / 1.3
    end
end

local function toggleLightBoost()
    lightBoostEnabled = not lightBoostEnabled
    if lightBoostEnabled then
        print("Light Boost enabled")
        game.Lighting.Brightness = 2
        game.Lighting.GlobalShadows = false
    else
        print("Light Boost disabled")
        game.Lighting.Brightness = 1
        game.Lighting.GlobalShadows = true
    end
end

-- Добавляем кнопки для SpeedBoost и LightBoost
createToggle("Toggle Speed +30%", toggleSpeedBoost)
createToggle("Toggle Light Boost", toggleLightBoost)

-- Основной цикл для обновления ESP
spawn(function()
    while true do
        -- Если включен ESP Box, добавляем визуальные объекты вокруг определённых объектов
        if espBoxEnabled then
            -- Пример для создания ESP Box вокруг определённых объектов (например, дверей)
            for _, part in pairs(game:GetService("Workspace"):GetDescendants()) do
                if part:IsA("Part") then
                    local box = Instance.new("SelectionBox")  -- Создаём коробку вокруг объекта
                    box.Adornee = part
                    box.Color3 = Color3.fromRGB(255, 0, 0)  -- Цвет коробки
                    box.Parent = part
                end
            end
        end
        
        wait(0.5)  -- Обновление каждую 0.5 секунды
    end
end)
